<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<th:block>
<head>
	<meta charset="UTF-8">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">

	<script src="https://kit.fontawesome.com/51772bd9bd.js" crossorigin="anonymous"></script>

	<script th:inline="javascript">
		const appId = [[${appId}]];
		const logged_id = [[${logged_id}]];	
	</script>

	<link rel="stylesheet" type="text/css" th:href="@{/css/review.css}">
	<script th:src="@{/js/detail.js}"></script>
	<script th:src="@{/js/review.js}"></script>

	<title>SteamHub - Review</title>
</head>
<body>
	<th:block th:insert="~{header::header}"></th:block>
	<div class="container">
		<th:block th:if="${data}">
			<th:block th:insert="~{header/detail::appDetail}"></th:block>
			<form>
				<input type="hidden" name="app_id" th:value="${appId}">
			</form>
			<div id="alertDiv">
			
			</div>
			<th:block th:if="${logged_id}">
				<div class="card" id="inputScore">
					<div class="card-body">
						<div class="row">
							<div class="col-auto mb-2">
								<span>추천 점수 : </span>
								<span class="star">
									★★★★★
									<span>★★★★★</span>
									<input id="rangeScore" type="range" oninput="drawStar(this)" value="6" step="2" min="2" max="10">
								  </span>
							</div>
							<span id="test"></span>
						</div>
						<div class="input-group">
							<textarea id="textBox" class="form-control" maxlength="100" placeholder="한줄평을 써주세요"></textarea>
							<button class="btn btn-outline-primary" type="button" id="submitScore">작성</button>
						</div>
						<div class="justify-content-end text-muted">
							<span id="textCount">0</span>
							<span id="textTotal">/ 100자</span>
						</div>
					</div>
				</div>
			</th:block>
			<div class="card">
			<div class="card-body">
				<label>평점: <span id="scoreCnt"></span> 개</label>
				<table class="table table-hover mt-3" id="scoreTable">
					<thead>
						<tr>
							<th style="width: 16.66%">작성자</th>
							<th style="width: 16.66%">평점</th>
							<th>내용</th>
						</tr>
					</thead>
					<tbody id="scoreList">
					
					</tbody>
				</table>
			</div>		
			</div>
		</th:block>
		<th:block th:unless="${data}">
			wrong application. <br>
			none of data.
		</th:block>
	</div>
</body>
</th:block>
</html>